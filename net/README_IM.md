# ğŸ”„ å³æ—¶é€šä¿¡APIé›†æˆæŒ‡å—

æœ¬é¡¹ç›®æä¾›äº†å¤šç§å³æ—¶é€šä¿¡APIé€‰æ‹©ï¼Œå¯ä»¥æ ¹æ®éœ€æ±‚é€‰æ‹©åˆé€‚çš„æ–¹æ¡ˆã€‚

## ğŸ“‹ æ–¹æ¡ˆå¯¹æ¯”

| æ–¹æ¡ˆ | ä¼˜ç‚¹ | ç¼ºç‚¹ | é€‚ç”¨åœºæ™¯ |
|------|------|------|----------|
| **WebSocket** | è½»é‡çº§ã€å®æ—¶æ€§å¥½ã€æ”¯æŒäºŒè¿›åˆ¶ | éœ€è¦è‡ªå»ºæœåŠ¡å™¨ | å±€åŸŸç½‘ã€å°è§„æ¨¡åº”ç”¨ |
| **Socket.IO** | è‡ªåŠ¨é‡è¿ã€è·¨å¹³å°ã€åŠŸèƒ½ä¸°å¯Œ | ä¾èµ–ç¬¬ä¸‰æ–¹åº“ | ç”Ÿäº§ç¯å¢ƒã€å¤§è§„æ¨¡åº”ç”¨ |
| **Firebase** | äº‘ç«¯æ‰˜ç®¡ã€è‡ªåŠ¨æ‰©å±•ã€è·¨è®¾å¤‡ | éœ€è¦Googleè´¦å·ã€æœ‰è´¹ç”¨ | å•†ä¸šåº”ç”¨ã€å¤šè®¾å¤‡åŒæ­¥ |

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. WebSocketæ–¹æ¡ˆï¼ˆæ¨èå…¥é—¨ï¼‰

**å®‰è£…ä¾èµ–ï¼š**
```bash
pip install websockets
```

**å¯åŠ¨æœåŠ¡å™¨ï¼š**
```bash
python net/websocket_server.py
```

**å¯åŠ¨å®¢æˆ·ç«¯ï¼š**
```bash
python net/websocket_client.py
```

### 2. Socket.IOæ–¹æ¡ˆï¼ˆæ¨èç”Ÿäº§ï¼‰

**å®‰è£…ä¾èµ–ï¼š**
```bash
pip install python-socketio python-engineio
```

**å¯åŠ¨æœåŠ¡å™¨ï¼š**
```bash
# éœ€è¦å…ˆå®‰è£…Flask-SocketIO
pip install flask-socketio
python net/socketio_server.py
```

**å¯åŠ¨å®¢æˆ·ç«¯ï¼š**
```bash
python net/socketio_client.py
```

### 3. Firebaseæ–¹æ¡ˆï¼ˆæ¨èå•†ä¸šï¼‰

**å®‰è£…ä¾èµ–ï¼š**
```bash
pip install firebase-admin
```

**é…ç½®Firebaseï¼š**
1. åœ¨[Firebase Console](https://console.firebase.google.com/)åˆ›å»ºé¡¹ç›®
2. ä¸‹è½½`firebase_config.json`é…ç½®æ–‡ä»¶
3. å°†é…ç½®æ–‡ä»¶æ”¾åœ¨é¡¹ç›®æ ¹ç›®å½•

**å¯åŠ¨å®¢æˆ·ç«¯ï¼š**
```bash
python net/firebase_client.py
```

## ğŸ”§ åŠŸèƒ½ç‰¹æ€§

### ä¿æŒç°æœ‰åŠŸèƒ½
- âœ… SM2å¯†é’¥ç”Ÿæˆå’ŒECDHåå•†
- âœ… ZUCåŠ å¯†è§£å¯†
- âœ… éšå†™æœ¯ï¼ˆå›¾ç‰‡/PDF/è§†é¢‘ï¼‰
- âœ… ç«¯åˆ°ç«¯åŠ å¯†

### æ–°å¢åŠŸèƒ½
- âœ… å®æ—¶æ¶ˆæ¯ä¼ é€’
- âœ… æ–‡ä»¶ä¼ è¾“
- âœ… è‡ªåŠ¨é‡è¿
- âœ… è·¨å¹³å°æ”¯æŒ
- âœ… äº‘ç«¯åŒæ­¥ï¼ˆFirebaseï¼‰

## ğŸ“ ä½¿ç”¨ç¤ºä¾‹

### åŸºæœ¬æ¶ˆæ¯å‘é€
```
> Hello, World!
[æˆ‘] Hello, World!
[Alice] Hi there!
```

### å‘é€éšå†™æ¶ˆæ¯
```
> sendmsg
è¯·é€‰æ‹©éšå†™ç±»å‹ï¼ˆimage/pdf/videoï¼‰: image
è¯·è¾“å…¥åŸå§‹è½½ä½“æ–‡ä»¶è·¯å¾„: hide/resources/images/cover.png
è¯·è¾“å…¥éšå†™è¾“å‡ºæ–‡ä»¶è·¯å¾„: hide/output/images/secret.png
è¯·è¾“å…¥è¦å‘é€çš„æ˜æ–‡æ¶ˆæ¯: This is a secret message
[ç³»ç»Ÿ] éšå†™æ¶ˆæ¯å·²å‘é€: hide/output/images/secret.png
```

### å‘é€æ–‡ä»¶
```
> sendfile test.txt text
[ç³»ç»Ÿ] æ–‡ä»¶å·²å‘é€: test.txt
```

## ğŸ”’ å®‰å…¨ç‰¹æ€§

### ç«¯åˆ°ç«¯åŠ å¯†
- ä½¿ç”¨SM2 ECDHè¿›è¡Œå¯†é’¥åå•†
- ä½¿ç”¨ZUCæµå¯†ç åŠ å¯†æ¶ˆæ¯
- æœåŠ¡å™¨æ— æ³•è§£å¯†æ¶ˆæ¯å†…å®¹

### éšå†™æœ¯
- æ”¯æŒå›¾ç‰‡ã€PDFã€è§†é¢‘è½½ä½“
- è‡ªåŠ¨æå–éšå†™æ¶ˆæ¯
- ä¿æŒè½½ä½“æ–‡ä»¶å®Œæ•´æ€§

## ğŸ› ï¸ è‡ªå®šä¹‰é…ç½®

### WebSocketé…ç½®
```python
# ä¿®æ”¹æœåŠ¡å™¨åœ°å€
client = WebSocketClient("ws://your-server:8765")
```

### Socket.IOé…ç½®
```python
# ä¿®æ”¹æœåŠ¡å™¨åœ°å€
client = SocketIOClient("http://your-server:5000")
```

### Firebaseé…ç½®
```python
# ä¿®æ”¹Firebaseé¡¹ç›®é…ç½®
firebase_admin.initialize_app(cred, {
    'databaseURL': 'https://your-project.firebaseio.com',
    'storageBucket': 'your-project.appspot.com'
})
```

## ğŸ“Š æ€§èƒ½å¯¹æ¯”

| æŒ‡æ ‡ | WebSocket | Socket.IO | Firebase |
|------|-----------|-----------|----------|
| å»¶è¿Ÿ | ~10ms | ~15ms | ~50ms |
| å¸¦å®½ | ä½ | ä¸­ | é«˜ |
| å¯é æ€§ | ä¸­ | é«˜ | å¾ˆé«˜ |
| æ‰©å±•æ€§ | ä½ | ä¸­ | é«˜ |

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

**1. è¿æ¥å¤±è´¥**
```bash
# æ£€æŸ¥æœåŠ¡å™¨æ˜¯å¦è¿è¡Œ
netstat -an | grep 8765  # WebSocket
netstat -an | grep 5000  # Socket.IO
```

**2. æ¶ˆæ¯å‘é€å¤±è´¥**
```bash
# æ£€æŸ¥ä¼šè¯å¯†é’¥
ls -la session_keys/
```

**3. éšå†™æå–å¤±è´¥**
```bash
# æ£€æŸ¥æ–‡ä»¶è·¯å¾„
ls -la hide/output/images/
```

### è°ƒè¯•æ¨¡å¼
```python
# å¯ç”¨è¯¦ç»†æ—¥å¿—
import logging
logging.basicConfig(level=logging.DEBUG)
```

## ğŸ“ˆ æ‰©å±•å»ºè®®

### 1. æ·»åŠ ç¾¤èŠåŠŸèƒ½
- ä¿®æ”¹æœåŠ¡å™¨æ”¯æŒå¤šç”¨æˆ·ä¼šè¯
- å®ç°æ¶ˆæ¯å¹¿æ’­æœºåˆ¶

### 2. æ·»åŠ ç¦»çº¿æ¶ˆæ¯
- ä½¿ç”¨æ•°æ®åº“å­˜å‚¨ç¦»çº¿æ¶ˆæ¯
- å®ç°æ¶ˆæ¯é˜Ÿåˆ—æœºåˆ¶

### 3. æ·»åŠ æ–‡ä»¶å‹ç¼©
- å¯¹å¤§æ–‡ä»¶è¿›è¡Œå‹ç¼©
- å‡å°‘ä¼ è¾“æ—¶é—´å’Œå¸¦å®½

### 4. æ·»åŠ æ¶ˆæ¯åŠ å¯†
- å®ç°æ¶ˆæ¯ç­¾åéªŒè¯
- æ·»åŠ é˜²é‡æ”¾æ”»å‡»æœºåˆ¶

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
1. ä¾èµ–æ˜¯å¦æ­£ç¡®å®‰è£…
2. ç½‘ç»œè¿æ¥æ˜¯å¦æ­£å¸¸
3. é…ç½®æ–‡ä»¶æ˜¯å¦æ­£ç¡®
4. é˜²ç«å¢™æ˜¯å¦é˜»æ­¢è¿æ¥

---

**é€‰æ‹©å»ºè®®ï¼š**
- **å­¦ä¹ /æµ‹è¯•**ï¼šä½¿ç”¨WebSocket
- **ç”Ÿäº§ç¯å¢ƒ**ï¼šä½¿ç”¨Socket.IO
- **å•†ä¸šåº”ç”¨**ï¼šä½¿ç”¨Firebase 